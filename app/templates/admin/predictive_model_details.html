{% extends 'admin/model/details.html' %}

{% block details_search %}
{% endblock %}

{% block details_table %}
  <h3>{{model.name}}
    <span class="label label-default" id="{{model.name}}-state"></span>
    <span class="label label-default" id="{{model.name}}-model_state"></span>
    <span id="{{model.name}}-stats">
        <span class="badge cpu"></span>
        <span class="badge mem"></span>
    </span>
  </h3>

  <textarea id="logs" rows="20" class="form-control" style="min-width: 100%"></textarea><br><br>
{% endblock %}

{% block tail %}
  {{ super() }}
  <script type="text/javascript" charset="utf-8">
    var socket;
    $(document).ready(function(){
      socket = io.connect('http://' + document.domain + ':' + location.port + '/logs');
      socket.on('connect', function() {
          socket.emit('joined_logs', {model_name: '{{model.name}}'});
          socket.emit('joined_stats', {});
          socket.emit('joined_states', {});
      });

      {% include 'admin/socket_handlers.html' %}
    });
  </script>
{% endblock %}
